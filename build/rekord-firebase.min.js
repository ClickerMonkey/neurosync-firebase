/* rekord-firebase 1.4.2 - A rekord binding to firebase - implementing Rekord.rest & Rekord.live by Philip Diffenderfer */
!function(e,n){"function"==typeof define&&define.amd?define(["Rekord","firebase"],function(r,i){return n(e,r,i)}):"object"==typeof module&&module.exports?module.exports=n(global,require("Rekord"),require("firebase")):e.Rekord=n(e,e.Rekord,e.Firebase||e.firebase)}(this,function(e,n,r,i){function t(e){return u(e.key)?e.key():e.key}function o(e){function n(n){var r=n.val(),i=t(n);e.liveSave(i,r)}function r(n){var r=t(n);e.liveRemove(r)}var i=e.getLiveFirebase?e.getLiveFirebase(e):e.api;return i?(i.on("child_added",n),i.on("child_changed",n),i.on("child_removed",r),{firebase:i,save:v,remove:v}):d.call(this,e)}function c(e){function r(n){return e.getFirebase?e.getFirebase(n,e):e.api}function t(n,i){return e.getQueryFirebase?e.getQueryFirebase(n,i):l(n)?r().root.child(n):r()}function o(e){return function(){e({})}}function c(e){return function(n){e({},n.code)}}function v(e){return function(n){var r=n.val(),i=[];for(var t in r){var o=r[t];f(o)&&i.push(o)}e(i)}}function d(e){return function(n){e([],n.code)}}function h(e){for(var n in e)e[n]===i&&delete e[n]}return e.api||e.getFirebase?{getFirebase:r,getQueryFirebase:t,all:function(e,i){return n.forceOffline?i([],0):void r().once("value").then(v(e))["catch"](d(i))},get:function(e,i,t){function o(e){var n=e.val();i(n)}return n.forceOffline?t({},0):void r(e).child(e.$key()).once("value").then(o)["catch"](c(t))},create:function(e,i,t,f){return n.forceOffline?f({},0):(h(i),void r(e).child(e.$key()).set(i).then(o(t))["catch"](c(f)))},update:function(e,i,t,f){return n.forceOffline?f({},0):(h(i),void r(e).child(e.$key()).update(i).then(o(t))["catch"](c(f)))},remove:function(e,i,t){return n.forceOffline?t({},0):void r(e).child(e.$key()).remove().then(o(i))["catch"](c(t))},query:function(e,r,i,o){if(n.forceOffline)return o([],0);var c=t(e,r);if(f(r))for(var l in r){var s=r[l];if(a(s))for(var h=0;h<s.length;h++)c[l](s[h]);else c[l](s)}else u(r)&&r(c);c.once("value").then(v(i))["catch"](d(o))}}:s.call(this,e)}var f=n.isObject,u=n.isFunction,a=n.isArray,l=n.isString,v=n.noop,d=n.live,s=n.rest;return n.setLive(o),n.setRest(c),n.Firebase={live:o,rest:c},n});
//# sourceMappingURL=rekord-firebase.min.js.map
