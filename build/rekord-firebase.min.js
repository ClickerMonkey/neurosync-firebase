/* rekord-firebase 1.4.0 - A rekord binding to firebase - implementing Rekord.rest & Rekord.live by Philip Diffenderfer */
!function(e,n,i,r){function t(e){return f(e.key)?e.key():e.key}function c(e){function n(n){var i=n.val(),r=t(n);e.liveSave(r,i)}function i(n){var i=t(n);e.liveRemove(i)}var r=e.getLiveFirebase?e.getLiveFirebase(e):e.api;return r?(r.on("child_added",n),r.on("child_changed",n),r.on("child_removed",i),{firebase:r,save:l,remove:l}):s.call(this,e)}function o(e){function i(n){return e.getFirebase?e.getFirebase(n,e):e.api}function t(n,r){return e.getQueryFirebase?e.getQueryFirebase(n,r):v(n)?i().root.child(n):i()}function c(e){return function(){e({})}}function o(e){return function(n){e({},n.code)}}function l(e){return function(n){var i=n.val(),r=[];for(var t in i){var c=i[t];a(c)&&r.push(c)}e(r)}}function s(e){return function(n){e([],n.code)}}function d(e){for(var n in e)e[n]===r&&delete e[n]}return e.api||e.getFirebase?{getFirebase:i,getQueryFirebase:t,all:function(e,r){return n.forceOffline?r([],0):void i().once("value").then(l(e))["catch"](s(r))},get:function(e,r,t){function c(e){var n=e.val();r(n)}return n.forceOffline?t({},0):void i(e).child(e.$key()).once("value").then(c)["catch"](o(t))},create:function(e,r,t,a){return n.forceOffline?a({},0):(d(r),void i(e).child(e.$key()).set(r).then(c(t))["catch"](o(a)))},update:function(e,r,t,a){return n.forceOffline?a({},0):(d(r),void i(e).child(e.$key()).update(r).then(c(t))["catch"](o(a)))},remove:function(e,r,t){return n.forceOffline?t({},0):void i(e).child(e.$key()).remove().then(c(r))["catch"](o(t))},query:function(e,i,r,c){if(n.forceOffline)return c([],0);var o=t(e,i);if(a(i))for(var v in i){var h=i[v];if(u(h))for(var d=0;d<h.length;d++)o[v](h[d]);else o[v](h)}else f(i)&&i(o);o.once("value").then(l(r))["catch"](s(c))}}:h.call(this,e)}var a=n.isObject,f=n.isFunction,u=n.isArray,v=n.isString,l=n.noop,s=n.live,h=n.rest;n.setLive(c),n.setRest(o),n.Firebase={live:c,rest:o}}(this,this.Rekord,this.Firebase||this.firebase);
//# sourceMappingURL=rekord-firebase.min.js.map
